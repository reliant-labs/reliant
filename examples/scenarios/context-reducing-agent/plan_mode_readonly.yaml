# Plan mode - read-only tools only
name: plan_mode_readonly
description: Plan mode restricts to plan-tagged tools
inputs:
  mode: "plan"
events:
  # LLM uses read-only tool
  - node: agent_loop.call_llm
    output:
      message:
        role: assistant
        text: "Let me look at the code structure."
      response_text: "Let me look at the code structure."
      tool_calls:
        - id: call_0
          name: glob
          input:
            pattern: "**/*.go"
  # Tool returns small result
  - node: agent_loop.execute_tools
    output:
      message:
        role: tool
        text: ""
      tool_results:
        - tool_call_id: call_0
          content: '["main.go", "util.go"]'
      total_result_chars: 30
      thread_token_count: 500
  # Final response
  - node: agent_loop.call_llm
    output:
      message:
        role: assistant
        text: "Found 2 Go files."
      response_text: "Found 2 Go files."
      tool_calls: []
expect:
  outcome: completed
  reached:
    - agent_loop
    - agent_loop.call_llm
    - agent_loop.execute_tools
    - agent_loop.save_tool_results
  not_reached:
    - agent_loop.approval
