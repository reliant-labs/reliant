# Manual mode - requires approval
name: manual_mode_approved
description: Manual mode requires approval before executing tools
inputs:
  mode: "manual"
events:
  # LLM requests a tool
  - node: agent_loop.call_llm
    output:
      message:
        role: assistant
        text: "I need to edit this file."
      response_text: "I need to edit this file."
      tool_calls:
        - id: call_0
          name: edit
          input:
            file_path: "/path/to/file.go"
            old_string: "old"
            new_string: "new"
  # User approves
  - node: agent_loop.approval
    output:
      approval_id: "approval_1"
      status: "approved"
      action_taken: "approve"
      data: {}
  # Tool executes with small result
  - node: agent_loop.execute_tools
    output:
      message:
        role: tool
        text: ""
      tool_results:
        - tool_call_id: call_0
          content: "File edited successfully"
      total_result_chars: 100
      thread_token_count: 500
  # Final response
  - node: agent_loop.call_llm
    output:
      message:
        role: assistant
        text: "File has been updated."
      response_text: "File has been updated."
      tool_calls: []
expect:
  outcome: completed
  reached:
    - agent_loop
    - agent_loop.call_llm
    - agent_loop.approval
    - agent_loop.execute_tools
    - agent_loop.save_tool_results
