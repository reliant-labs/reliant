# Max turns without response - loop exits when max_turns reached without response tool being called
name: max_turns_without_response
description: Loop exits when max_turns reached and agent never called response tool
inputs:
  mode: auto
  max_turns: 3
  response_tool_name: submit_response
events:
  # Iteration 1: LLM responds without tools, gets reminded
  - node: agent_loop.call_llm
    output:
      message:
        role: assistant
        text: "I'm thinking about how to approach this."
      response_text: "I'm thinking about how to approach this."
      tool_calls: []
  # remind_response triggers because no tool calls

  # Iteration 2: LLM still doesn't use tools
  - node: agent_loop.call_llm
    output:
      message:
        role: assistant
        text: "Let me analyze the problem more."
      response_text: "Let me analyze the problem more."
      tool_calls: []
  # remind_response triggers again

  # Iteration 3 (max_turns=3, last iteration): LLM still doesn't use response tool
  - node: agent_loop.call_llm
    output:
      message:
        role: assistant
        text: "I need more time to think."
      response_text: "I need more time to think."
      tool_calls: []
  # Loop exits after iteration 3 because iter.iteration (3) is no longer < max_turns (3)
  # Note: completed is never set to true since response tool was never called
expect:
  outcome: completed
  reached:
    - agent_loop
    - agent_loop.call_llm
    - agent_loop.remind_response
  not_reached:
    - agent_loop.execute_tools
    - agent_loop.approval
